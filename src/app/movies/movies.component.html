<app-zip></app-zip>

<div [ngClass]="validZip() ? 'active' : 'inactive'" class="get-button">
  <h2>{{ title }}</h2>
  <form (ngSubmit)="getMovies()">
    <input type="submit" value="Get movies">
  </form>
</div>

<div *ngFor="let mov of moviesShowing" class="movieTile" (click)="mov.selected = !mov.selected">
  <div class="tile-header">
    <h3 class="movie-title inline">{{ mov.title }}</h3>
    <p class="movie-genres inline">{{ joinArray(mov.genres) }}</p>
    <p class="inline left-marg" [style.visibility]="mov.qualityRating > -1 ? 'visible' : 'hidden'">Rating: {{ mov.qualityRating }}</p>
  </div>

  <div class="tile-body">
    <div [class]="mov.selected ? 'open' : 'closed'">
      <p class="description"><em>{{ mov.description }}</em></p>
      <p class="cast"><strong>Cast:</strong> {{ joinArray(mov.cast) }}</p>

      <div class="showtimes">
        <!--<p>showtimes: {{ mov.showtimes.length }}</p>-->
        <div *ngFor="let showtime of mov.showtimes">
          <h5>{{ showtime.name }}</h5>
          <ul class="showtimes-list">
            <li *ngFor="let time of showtime.times">{{ time | slice:-5 }}</li>
          </ul>
        </div>
      </div>

      <p class="summary">{{ mov.summary }}</p>
    </div>
  </div>
</div>

<div class="loading-spinner" [hidden]="!loading">
  <img src="/assets/images/04-spinner.gif" alt="Loading">
</div>