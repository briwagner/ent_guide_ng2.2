<app-zip></app-zip>

<div [ngClass]="!hasData && userZip? 'active' : 'inactive'" class="get-button">
  <form (ngSubmit)="getMovies()">
    <input type="submit" value="Get movies">
  </form>
</div>

<div class="title-bar" *ngIf="hasData">
  <h2>{{ title }}</h2>
</div>

<div class="loading-spinner" [hidden]="!loading">
  <img src="/assets/images/01-progress.gif" alt="Loading">
</div>

<div class="movie-ctr">

  <div *ngFor="let mov of moviesShowing" class="movieTile" (click)="mov.selected = !mov.selected">
    <div class="tile-header">
      <h3 class="movie-title inline">{{ mov.title }}</h3>
      <p class="inline" [style.visibility]="mov.qualityRating > -1 ? 'visible' : 'hidden'">Rating: {{ mov.qualityRating }}</p>
      <p class="movie-genres">{{ joinArray(mov.genres) }}</p>
    </div>

    <div class="tile-body">
      <div [class]="mov.selected ? 'open' : 'closed'">
        <p class="description"><em>{{ mov.description }}</em></p>
        <p class="cast"><strong>Cast:</strong> {{ joinArray(mov.cast) }}</p>

        <div class="showtimes">
          <!--<p>showtimes: {{ mov.showtimes.length }}</p>-->
          <div *ngFor="let showtime of mov.showtimes">
            <h5>{{ showtime.name }}</h5>
            <ul class="showtimes-list">
              <li *ngFor="let time of showtime.times">{{ time | slice:-5 }}</li>
            </ul>
          </div>
        </div>

        <p class="summary">{{ mov.summary }}</p>
      </div>

    </div>
  </div>

</div>