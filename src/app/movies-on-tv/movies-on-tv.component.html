<div class="loading-spinner" [hidden]="!loading">
  <img src="/assets/images/01-progress.gif" alt="Loading">
</div>

<div class="movies" [hidden]="!moviesShowing">
  <h2>Movies on TV</h2>
  <form class="movies-genre" (ngSubmit)="setFilter(movieInput)">
    <input type="text" [(ngModel)]="movieInput" placeholder="Select genre" name="genre-filter">
    <input type="Submit" value="Apply Filter">
  </form>
  <div class="filter-btn">
    <button type="button" (click)="setFilter('children')">Family</button>
    <button type="button" (click)="setFilter('animated')">Animated</button>
    <button type="button" (click)="setFilter('comedy')">Comedy</button>
    <button type="button" (click)="setFilter('drama')">Drama</button>
    <button type="button" (click)="setFilter('action')">Action</button>
    <button type="button" (click)="setFilter('adventure')">Adventure</button>
    <button type="button" (click)="setFilter('science fiction')">Sci-fi</button>
    <button type="button" (click)="setFilter('thriller')">Thriller</button>
    <button type="button" (click)="setFilter('horror')">Horror</button>
    <button type="button" class="reset" (click)="setFilter('')">Reset</button>
  </div>
  <p *ngIf=moviesShowing class="small-text"><em>{{(moviesShowing | genrePipe:movieFilter).length}} movies found</em></p>

  <div *ngFor="let mov of (moviesShowing | genrePipe:movieFilter)"
       class="movieTile" (click)="mov.selected = !mov.selected">
    <div class="tile-header">
      <h3 class="movie-title inline">{{ mov.title }}</h3>
      <p class="inline">{{mov.station}}</p>
      <p class="inline left-marg">{{mov.tvshowtime | date:'shortTime'}}</p>
    </div>
    <div class="tile-body">
      <div [class]="mov.selected ? 'open' : 'closed'">
        <p [class]="mov.qualityRating > -1 ? 'active' : 'inactive'">Rating: {{ mov.qualityRating }}</p>
        <p class="description"><em>{{ mov.description }}</em></p>
        <p class="cast"><strong>Cast: </strong>{{ joinArray(mov.cast) }}</p>
        <p class="movie-genres">{{ joinArray(mov.genres) }}</p>
        <p class="pad-bot">{{ mov.summary }}</p>
      </div>
    </div>
  </div>
</div>